(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(t,e,n){t.exports=n(68)},30:function(t,e,n){},31:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(19),r=n.n(i),c=(n(30),n(20)),l=n(21),u=n(24),s=n(22),m=n(7),g=n(23),f=(n(31),n(11)),d=n.n(f),h=function(t){var e=t.inputValue,n=t.onInputChange,a=t.onImageUpload,i=t.onButtonSubmit;return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("div",{className:"input-group"},o.a.createElement("div",{className:"multifile-upload-group"},o.a.createElement("input",{onChange:a,type:"file",name:"file",id:"file",className:"input-file--hidden",accept:"image/*"}),o.a.createElement("label",{className:"label-input-file",htmlFor:"file"},"Upload Image"),o.a.createElement("input",{autoFocus:!0,spellCheck:"false",value:e,onChange:n,className:"input-text",type:"text",placeholder:"Or type URL..."})),o.a.createElement("button",{onClick:i,className:"input-button"},"Detect"))))},v=(n(67),function(){return o.a.createElement("div",{className:"error-message"},"Oops! Something went wrong :( Perhapes the url is incorrect")}),b=function(t){var e=t.boundingBox,n={top:100*e.top_row+"%",right:100-100*e.right_col+"%",bottom:100-100*e.bottom_row+"%",left:100*e.left_col+"%"};return o.a.createElement("div",{className:"bounding-box",style:n})},p=function(t){var e=t.imageUrl,n=t.onMainImageLoad,a=t.boundingBox;return o.a.createElement("div",{className:"container"},o.a.createElement("img",{onLoad:function(t){return n(t,a)},className:"image-demo",src:e,alt:""}),a.map(function(t){var e=t.region_info,n=e.bounding_box,a="".concat(n.top_row).concat(n.left_col).concat(n.bottom_row).concat(n.right_col);return o.a.createElement(b,{key:a,boundingBox:e.bounding_box})}))},w=function(t){var e=t.boxId,n=t.onCanvas;return o.a.createElement("div",null,o.a.createElement("canvas",{ref:function(t){return t?n(t,e):null}}))},E=function(t){var e=t.boundingBox,n=t.onCanvas;return o.a.createElement("div",{className:"info-demo"},e.map(function(t){var e=t.region_info.bounding_box,a="".concat(e.top_row).concat(e.left_col).concat(e.bottom_row).concat(e.right_col);return o.a.createElement(w,{key:a,boxId:a,onCanvas:n})}))},_=function(t){var e=t.imageStatus,n=t.imageUrl,a=t.boundingBox,i=t.onMainImageLoad,r=t.onCanvas;return null===e?null:400!==e?o.a.createElement("div",{className:"image-panel",style:{maxWidth:"800px"}},o.a.createElement(p,{imageUrl:n,boundingBox:a,onMainImageLoad:i}),o.a.createElement(E,{boundingBox:a,onCanvas:r})):o.a.createElement(v,null)},x=function(){return o.a.createElement("div",{id:"logo"},"\u15b4\u15e9\u1455I\u15b4Y")},C=function(t){var e=t.boundingBox,n=e&&e.length>1?"Faces":"Face";return e&&o.a.createElement("div",{className:"stats"},o.a.createElement("h1",null,"Found ","".concat(e.length," ").concat(n)," "))},U=function(t,e){return e.find(function(e){return e.id===t})},B=function(t){var e=t.filter(function(t){return t.clientHeight&&t.clientWidth});this.setState({canvasCollection:e})},I=function(t,e,n){var a=e.offsetWidth,o=e.offsetHeight,i=e.naturalWidth,r=e.naturalHeight,c=a-a*(n.left_col+(1-n.right_col)),l=o-o*(n.top_row+(1-n.bottom_row)),u=this.state.canvasCollection,s=U(t,u),m=70*c/l,g=(s=s.canvas).getContext("2d"),f=i*n.left_col,d=r*n.top_row,h=i/((i-(i*(1-n.right_col)+f))/m),v=r/((r-(r*(1-n.bottom_row)+d))/70);s.height=70,s.width=m,g.drawImage(e,f,d,i,r,0,0,h,v)},k=function(t,e){var n=function(n){var a=new FileReader;a.onload=function(t){var a=t.target.result,o=new Image;o.onload=function(){var t=o.width,a=o.height,i=document.createElement("canvas"),r=i.getContext("2d");switch(4<n&&n<9?(i.width=a,i.height=t):(i.width=t,i.height=a),n){case 2:r.transform(-1,0,0,1,t,0);break;case 3:r.transform(-1,0,0,-1,t,a);break;case 4:r.transform(1,0,0,-1,0,a);break;case 5:r.transform(0,1,1,0,0,0);break;case 6:r.transform(0,1,-1,0,a,0);break;case 7:r.transform(0,-1,-1,0,a,t);break;case 8:r.transform(0,-1,1,0,0,t)}r.drawImage(o,0,0),e(i.toDataURL())},o.src=a},a.readAsDataURL(t)},a=new FileReader;a.onload=function(t){var e=new DataView(t.target.result);if(65496!==e.getUint16(0,!1))return n(-2);for(var a=e.byteLength,o=2;o<a;){var i=e.getUint16(o,!1);if(o+=2,65505===i){if(1165519206!==e.getUint32(o+=2,!1))return n(-1);var r=18761===e.getUint16(o+=6,!1);o+=e.getUint32(o+4,r);var c=e.getUint16(o,r);o+=2;for(var l=0;l<c;l++)if(274===e.getUint16(o+12*l,r))return n(e.getUint16(o+12*l+8,r))}else{if(65280!==(65280&i))break;o+=e.getUint16(o,!1)}}return n(-1)},a.readAsArrayBuffer(t)},S=new d.a.App({apiKey:"f816634000e34c3b9c5271e13f690d5f"}),y=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(o)))).state={input:"",imageUrl:"",imageStatusOk:null,imageSize:null,boundingBox:null,canvasCollection:[],fileData:null},n.clarifaiDetectFace=function(t){var e,a=t;"object"===typeof t&&(a=t.base64,e=t.base64.replace(/data:.*;base64,/,""),t.base64=e),S.models.predict(d.a.FACE_DETECT_MODEL,t).then(function(t){var e=t.outputs[0].data.regions||[];n.setState({boundingBox:e}),n.setState({imageStatusOk:!0}),n.setState({imageUrl:a})},function(t){n.setState({imageStatusOk:t.status}),n.setState({boundingBox:null})})},n.onInputChange=function(t){n.setState({input:t.target.value})},n.onCanvas=function(t,e){var a=n.state.canvasCollection.slice(),o={id:e,canvas:t};U(e,a)||(a.push(o),n.setState({canvasCollection:a}))},n.onMainImageLoad=function(t,e){var a=t.target;e.forEach(function(t){var e=t.region_info.bounding_box,o="".concat(e.top_row).concat(e.left_col).concat(e.bottom_row).concat(e.right_col);I.call(Object(m.a)(n),o,a,e)}),B.call(Object(m.a)(n),n.state.canvasCollection.slice())},n.onImageUpload=function(t){var e=t.target.files[0];k(e,function(t){n.clarifaiDetectFace({base64:t})})},n.onButtonSubmit=function(t){var e=n.state.input.trim();if(e===n.state.imageUrl)return null;n.clarifaiDetectFace(e)},n}return Object(g.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(x,null),o.a.createElement("main",null,o.a.createElement(h,{inputValue:this.state.input,onImageUpload:this.onImageUpload,onButtonSubmit:this.onButtonSubmit,onInputChange:this.onInputChange}),o.a.createElement(C,{boundingBox:this.state.boundingBox}),o.a.createElement(_,{imageStatus:this.state.imageStatusOk,imageUrl:this.state.imageUrl,onMainImageLoad:this.onMainImageLoad,boundingBox:this.state.boundingBox,onCanvas:this.onCanvas})))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.b0df3871.chunk.js.map