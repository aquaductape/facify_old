(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(t,e,n){t.exports=n(68)},30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(19),l=n.n(i),c=(n(30),n(20)),r=n(21),u=n(24),s=n(22),m=n(7),g=n(23),d=(n(31),function(t){var e=t.inputValue,n=t.onInputChange,a=t.onImageUpload,i=t.onButtonSubmit;return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("div",{className:"input-group"},o.a.createElement("div",{className:"multifile-upload-group"},o.a.createElement("input",{onChange:a,type:"file",name:"file",id:"file",className:"input-file--hidden",accept:"image/*"}),o.a.createElement("label",{className:"label-input-file",htmlFor:"file"},"Upload Image"),o.a.createElement("input",{autoFocus:!0,spellCheck:"false",value:e,onChange:n,className:"input-text",type:"text",placeholder:"Or type URL..."})),o.a.createElement("button",{onClick:i,className:"input-button"},"Detect"))))}),f=(n(32),function(){return o.a.createElement("div",{className:"error-message"},"Oops! Something went wrong :( Perhapes the url is incorrect")}),p=function(t){var e=t.boundingBox,n={top:100*e.top_row+"%",right:100-100*e.right_col+"%",bottom:100-100*e.bottom_row+"%",left:100*e.left_col+"%"};return o.a.createElement("div",{className:"bounding-box",style:n})},h=function(t){var e=t.imageUrl,n=t.onMainImageLoad,a=t.boundingBox;return o.a.createElement("div",{className:"container"},o.a.createElement("img",{onLoad:function(t){return n(t,a)},className:"image-demo",src:e,alt:""}),a.map(function(t){var e=t.region_info,n=e.bounding_box,a="".concat(n.top_row).concat(n.left_col).concat(n.bottom_row).concat(n.right_col);return o.a.createElement(p,{key:a,boundingBox:e.bounding_box})}))},v=function(t){var e=t.boxId,n=t.onCanvas;return o.a.createElement("div",null,o.a.createElement("canvas",{ref:function(t){return t?n(t,e):null}}))},b=function(t){var e=t.boundingBox,n=t.onCanvas;return o.a.createElement("div",{className:"info-demo"},e.map(function(t){var e=t.region_info.bounding_box,a="".concat(e.top_row).concat(e.left_col).concat(e.bottom_row).concat(e.right_col);return o.a.createElement(v,{key:a,boxId:a,onCanvas:n})}))},E=function(t){var e=t.imageStatus,n=t.imageUrl,a=t.boundingBox,i=t.onMainImageLoad,l=t.onCanvas;return null===e?null:400!==e?o.a.createElement("div",{className:"image-panel",style:{maxWidth:"800px"}},o.a.createElement(h,{imageUrl:n,boundingBox:a,onMainImageLoad:i}),o.a.createElement(b,{boundingBox:a,onCanvas:l})):o.a.createElement(f,null)},_=function(){return o.a.createElement("div",{id:"logo"},"\u15b4\u15e9\u1455I\u15b4Y")},w=n(10),x=n.n(w),C=function(t,e){return e.find(function(e){return e.id===t})},S=function(t){var e=t.filter(function(t){return t.clientHeight&&t.clientWidth});this.setState({canvasCollection:e})},B=function(t,e,n){var a=e.offsetWidth,o=e.offsetHeight,i=e.naturalWidth,l=e.naturalHeight,c=a-a*(n.left_col+(1-n.right_col)),r=o-o*(n.top_row+(1-n.bottom_row)),u=this.state.canvasCollection,s=C(t,u),m=70*c/r,g=(s=s.canvas).getContext("2d"),d=i*n.left_col,f=l*n.top_row,p=i/((i-(i*(1-n.right_col)+d))/m),h=l/((l-(l*(1-n.bottom_row)+f))/70);s.height=70,s.width=m,g.drawImage(e,d,f,i,l,0,0,p,h)},I=function(t){var e=t.boundingBox,n=e&&e.length>1?"Faces":"Face";return e&&o.a.createElement("div",{className:"stats"},o.a.createElement("h1",null,"Found ","".concat(e.length," ").concat(n)," "))},O=new x.a.App({apiKey:"f816634000e34c3b9c5271e13f690d5f"}),U=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(o)))).state={input:"",imageUrl:"",imageStatusOk:null,imageSize:null,boundingBox:null,canvasCollection:[],bbIdx:0},n.onInputChange=function(t){n.setState({input:t.target.value})},n.onCanvas=function(t,e){var a=n.state.canvasCollection.slice(),o={id:e,canvas:t};C(e,a)||(a.push(o),n.setState({canvasCollection:a}))},n.onMainImageLoad=function(t,e){var a=t.target;e.forEach(function(t){var e=t.region_info.bounding_box,o="".concat(e.top_row).concat(e.left_col).concat(e.bottom_row).concat(e.right_col);B.call(Object(m.a)(n),o,a,e)}),S.call(Object(m.a)(n),n.state.canvasCollection.slice())},n.onImageUpload=function(t){var e=t.target.files[0],a=new FileReader;a.addEventListener("load",function(){var t=a.result,e=t.replace(/data:.*;base64,/,"");O.models.predict(x.a.FACE_DETECT_MODEL,{base64:e}).then(function(e){var a=e.outputs[0].data.regions;n.setState({boundingBox:a}),n.setState({imageStatusOk:!0}),n.setState({imageUrl:t})},function(t){n.setState({imageStatusOk:t.status}),n.setState({boundingBox:null})})},!1),e&&a.readAsDataURL(e)},n.onButtonSubmit=function(t){var e=n.state.input.trim();if(e===n.state.imageUrl)return null;O.models.predict(x.a.FACE_DETECT_MODEL,e).then(function(t){var a=t.outputs[0].data.regions;n.setState({boundingBox:a}),n.setState({imageStatusOk:!0}),n.setState({imageUrl:e})},function(t){n.setState({imageStatusOk:t.status}),n.setState({boundingBox:null})})},n}return Object(g.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(_,null),o.a.createElement("main",null,o.a.createElement(d,{inputValue:this.state.input,onImageUpload:this.onImageUpload,onButtonSubmit:this.onButtonSubmit,onInputChange:this.onInputChange}),o.a.createElement(I,{boundingBox:this.state.boundingBox}),o.a.createElement(E,{imageStatus:this.state.imageStatusOk,imageUrl:this.state.imageUrl,onMainImageLoad:this.onMainImageLoad,boundingBox:this.state.boundingBox,onCanvas:this.onCanvas})))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.677d9204.chunk.js.map