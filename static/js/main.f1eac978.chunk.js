(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(t,e,n){t.exports=n(73)},33:function(t,e,n){},36:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(20),i=n.n(r),c=(n(33),n(7)),l=n.n(c),u=n(21),s=n(22),m=n(23),f=n(27),g=n(24),d=n(8),v=n(26),h=(n(36),n(12)),p=n.n(h),b=function(t){var e=t.inputValue,n=t.onInputChange,a=t.onImageUpload,r=t.onButtonSubmit;return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("div",{className:"input-group"},o.a.createElement("div",{className:"multifile-upload-group"},o.a.createElement("input",{onChange:a,type:"file",name:"file",id:"file",className:"input-file--hidden",accept:"image/*"}),o.a.createElement("label",{className:"label-input-file",htmlFor:"file"},"Upload Image"),o.a.createElement("input",{autoFocus:!0,spellCheck:"false",value:e,onChange:n,className:"input-text",type:"text",placeholder:"Or type URL..."})),o.a.createElement("button",{onClick:r,className:"input-button"},"Detect"))))},w=(n(72),function(){return o.a.createElement("div",{className:"error-message"},"Oops! Something went wrong :( Perhapes the url is incorrect")}),E=function(t){var e=t.boundingBox,n={top:100*e.top_row+"%",right:100-100*e.right_col+"%",bottom:100-100*e.bottom_row+"%",left:100*e.left_col+"%"};return o.a.createElement("div",{className:"bounding-box",style:n})},x=function(t){var e=t.imageUrl,n=t.onMainImageLoad,a=t.boundingBox;return o.a.createElement("div",{className:"container"},o.a.createElement("img",{onLoad:function(t){return n(t,a)},className:"image-demo",src:e,alt:""}),a.map(function(t){var e=t.region_info,n=e.bounding_box,a="".concat(n.top_row).concat(n.left_col).concat(n.bottom_row).concat(n.right_col);return o.a.createElement(E,{key:a,boundingBox:e.bounding_box})}))},_=function(t){var e=t.boxId,n=t.onCanvas;return o.a.createElement("div",null,o.a.createElement("canvas",{ref:function(t){return t?n(t,e):null}}))},C=function(t){var e=t.boundingBox,n=t.onCanvas;return o.a.createElement("div",{className:"info-demo"},e.map(function(t){var e=t.region_info.bounding_box,a="".concat(e.top_row).concat(e.left_col).concat(e.bottom_row).concat(e.right_col);return o.a.createElement(_,{key:a,boxId:a,onCanvas:n})}))},U=function(t){var e=t.imageStatus,n=t.imageUrl,a=t.boundingBox,r=t.onMainImageLoad,i=t.onCanvas;return null===e?null:400!==e?o.a.createElement("div",{className:"image-panel",style:{maxWidth:"800px"}},o.a.createElement(x,{imageUrl:n,boundingBox:a,onMainImageLoad:r}),o.a.createElement(C,{boundingBox:a,onCanvas:i})):o.a.createElement(w,null)},k=function(){return o.a.createElement("div",{id:"logo"},"\u15b4\u15e9\u1455I\u15b4Y")},B=function(t){var e=t.boundingBox,n=e&&e.length>1?"Faces":"Face";return e&&o.a.createElement("div",{className:"stats"},o.a.createElement("h1",null,"Found ","".concat(e.length," ").concat(n)," "))},I=function(t,e){return e.find(function(e){return e.id===t})},y=function(t){var e=t.filter(function(t){return t.clientHeight&&t.clientWidth});this.setState({canvasCollection:e})},S=function(t,e,n){var a=e.offsetWidth,o=e.offsetHeight,r=e.naturalWidth,i=e.naturalHeight,c=a-a*(n.left_col+(1-n.right_col)),l=o-o*(n.top_row+(1-n.bottom_row)),u=this.state.canvasCollection,s=I(t,u),m=70*c/l,f=(s=s.canvas).getContext("2d"),g=r*n.left_col,d=i*n.top_row,v=r/((r-(r*(1-n.right_col)+g))/m),h=i/((i-(i*(1-n.bottom_row)+d))/70);s.height=70,s.width=m,f.drawImage(e,g,d,r,i,0,0,v,h)},O=n(25),N=function(t,e,n,a){return new(n||(n=Promise))(function(o,r){function i(t){try{l(a.next(t))}catch(e){r(e)}}function c(t){try{l(a.throw(t))}catch(e){r(e)}}function l(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,c)}l((a=a.apply(t,e||[])).next())})};function L(t,e){return N(this,void 0,void 0,l.a.mark(function n(){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",j(t).then(function(n){return F(t,n||1,e||999999)}));case 1:case"end":return n.stop()}},n)}))}var j=function(t){return new Promise(function(e){var n=new FileReader;n.onload=function(){return e(function(){var t=new DataView(n.result);if(65496===t.getUint16(0,!1))for(var e=t.byteLength,a=2;a<e;){var o=t.getUint16(a,!1);if(a+=2,65505===o){if(a+=2,1165519206!==t.getUint32(a,!1))return;a+=6;var r=18761===t.getUint16(a,!1);a+=t.getUint32(a+4,r);var i=t.getUint16(a,r);a+=2;for(var c=0;c<i;c++)if(274===t.getUint16(a+12*c,r))return t.getUint16(a+12*c+8,r)}else{if(65280!==(65280&o))break;a+=t.getUint16(a,!1)}}}())},n.readAsArrayBuffer(t.slice(0,65536))})},F=function(t,e,n){return new Promise(function(a){var o=new FileReader;o.onload=function(){var t=o.result,r=new Image;r.onload=function(){var t=document.createElement("canvas"),o=t.getContext("2d"),i=r.width,c=r.height,l=e>=5&&e<=8?[c,i]:[i,c],u=Object(O.a)(l,2),s=u[0],m=u[1],f=s>n?n/s:1;switch(i*=f,c*=f,t.width=s*f,t.height=m*f,e){case 2:o.transform(-1,0,0,1,i,0);break;case 3:o.transform(-1,0,0,-1,i,c);break;case 4:o.transform(1,0,0,-1,0,c);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,c,0);break;case 7:o.transform(0,-1,-1,0,c,i);break;case 8:o.transform(0,-1,1,0,0,c)}o.drawImage(r,0,0,i,c),a(t.toDataURL("image/jpeg"))},r.src=t},o.readAsDataURL(t)})},D=new p.a.App({apiKey:"f816634000e34c3b9c5271e13f690d5f"}),A=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(t=Object(g.a)(e)).call.apply(t,[this].concat(o)))).state={input:"",imageUrl:"",imageStatusOk:null,imageSize:null,boundingBox:null,canvasCollection:[],fileData:null},n.clarifaiDetectFace=function(t){var e,a=t;"object"===typeof t&&(a=t.base64,e=t.base64.replace(/data:.*;base64,/,""),t.base64=e),D.models.predict(p.a.FACE_DETECT_MODEL,t).then(function(t){var e=t.outputs[0].data.regions||[];n.setState({boundingBox:e}),n.setState({imageStatusOk:!0}),n.setState({imageUrl:a})},function(t){n.setState({imageStatusOk:t.status}),n.setState({boundingBox:null})})},n.onInputChange=function(t){n.setState({input:t.target.value})},n.onCanvas=function(t,e){var a=n.state.canvasCollection.slice(),o={id:e,canvas:t};I(e,a)||(a.push(o),n.setState({canvasCollection:a}))},n.onMainImageLoad=function(t,e){var a=t.target;e.forEach(function(t){var e=t.region_info.bounding_box,o="".concat(e.top_row).concat(e.left_col).concat(e.bottom_row).concat(e.right_col);S.call(Object(d.a)(n),o,a,e)}),y.call(Object(d.a)(n),n.state.canvasCollection.slice())},n.onImageUpload=function(){var t=Object(u.a)(l.a.mark(function t(e){var a,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.target.files[0]){t.next=3;break}return t.abrupt("return",null);case 3:return t.next=6,L(a);case 6:o=t.sent,n.clarifaiDetectFace({base64:o});case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),n.onButtonSubmit=function(t){var e=n.state.input.trim();if(e===n.state.imageUrl)return null;n.clarifaiDetectFace(e)},n}return Object(v.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(k,null),o.a.createElement("main",null,o.a.createElement(b,{inputValue:this.state.input,onImageUpload:this.onImageUpload,onButtonSubmit:this.onButtonSubmit,onInputChange:this.onInputChange}),o.a.createElement(B,{boundingBox:this.state.boundingBox}),o.a.createElement(U,{imageStatus:this.state.imageStatusOk,imageUrl:this.state.imageUrl,onMainImageLoad:this.onMainImageLoad,boundingBox:this.state.boundingBox,onCanvas:this.onCanvas})))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.f1eac978.chunk.js.map